# Jira Collector

Jira collector is used to ingest data from Jira instances, tickets or files attached to tickets.

## Quick start

```bash
python3 -m maas_collector.rawdata.cli.jirax
```

## Command Line Options

> No specific CLI option.

## Collector Configuration Options

| Configuration key   | Description                                                                            |
| ------------------- | -------------------------------------------------------------------------------------- |
| class               | shall be JiraExtendedCollectorConfiguration                                            |
| jql_query           | A [JQL Query](https://www.atlassian.com/software/jira/guides/jql/overview#what-is-jql) |
| ingest_attachements | indicate whether to search attachments for files matching auxiliary configurations     |
| attachement_prefix  | adds prefix to attachment file names                                                   |
| refresh_interval    | time interval between collect loop in minutes (default 10)                             |
| timeout             | connection timeout in seconds (default 120)                                            |
| expand              | string that contains attributes to expand, comma-separated                             |

## Credential File Options

Jira Collector supports several authentication methods based on the `auth_method` configuration key:

- `basic`: authenticate through `basic_auth` method using username and password;
- `cookie_based`: this is _deprecated_ but still in use by some subcontractors. Use username and password to mimic authentication through UI.
- `token_based`: authenticate with a token generated in the Jira settings. Requires `token` key.
- `jira_cloud`: authenticate to Jira Cloud with username and a token generated in the Jira settings. requires `user ` and `token` keys.

| Configuration key | Description                                                       |
| ----------------- | ----------------------------------------------------------------- |
| end_point         | url of Jira api                                                   |
| client_port       | server port (default 21)                                          |
| username          | username                                                          |
| password          | user password                                                     |
| token             | token generated by user in Jira UI                                |
| proxy_login       | http proxy login (for cookie_based authentication method only)    |
| proxy_password    | http proxy password (for cookie_based authentication method only) |
